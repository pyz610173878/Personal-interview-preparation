

# 作用域链



# 闭包

闭包，我们通常称作匿名函数。指的是那些引用了另一个函数作用域中变量的函数，通常在嵌套函数中发生。

要理解闭包首先需要理解作用域链的创建与使用。在调用一个函数时，会为这个函数调用创建一个执行上下文，这个上下文是一个对象它保存了当前上下文中的所有变量与函数，并创建一个作用域链。而在一个函数内部定义的函数会包含父函数的活动对象，也就是参数值和内部定义的并添加到它的作用域链中。这样匿名函数就可以访问父函数的所有变量。

## 好处

闭包可以将变量和函数私有化，从而避免命名冲突和变量污染。

## 副作用 内存泄漏

因为匿名函数的作用域链中仍然有对它的引用。父函数执行完毕后，其执行上下文的作用域链会销毁，但它的各种变量仍然会保留在内存中，直到匿名函数被销毁后才会被销毁。解决办法。我们可以手动解除闭包，即将对内部函数的引用删除。例如，可以将内部函数赋值为 null，或者将外部函数返回的引用赋值为 null。