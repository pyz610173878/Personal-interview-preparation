# 定义



`this` 关键字是函数运行时自动生成的一个内部对象，只能在函数内部使用，他所指向可能是一个构造函数。即使一个函数里面没有使用this关键字，其实也是存在this值的。如果不清楚当前this指向的是谁。可以再vscode中的调试功能可以清晰的看到当前this所指向的对象。需要注意的是，`this`在函数执行过程中，`this`一旦被确定了，就不可以再更改。不同的使用场景this的值为会不同。我总结出了五种不同的情况。

# 绑定规则

根据不同的使用场合，`this`有不同的值，主要分为下面几种情况：

## 全局上下文 默认绑定

在全局上下文中，`this`指向全局对象（在浏览器环境中是`window`对象，在Node.js环境中是`global`对象）





## 隐式绑定

### 1. 普通函数

在函数上下文中，`this`的值取决于函数的调用方式。如果函数是作为**对象的方法**调用的，那么`this`就指向这个对象。如果函数是作为普通函数调用的，那么`this`就指向全局对象。如果是在浏览器环境中那么就是`window`对象，在Node.js环境中是`global`对象。举个例子，在公司的业务中，用户登录方法定义在了vuex的actions方法中。用户的权限校对是根据token判断的值。当后端返回token值时，首先把token值写入cookie中，然后把token值赋值给state对象中定义的token变量。

```JS
var obj = {
  x: 1,
  m: function() {
    console.log(this.x); // 1
  }
};

obj.m(); // 1
```



### 2. 构造函数

在构造函数中，`this`指向新创建的对象。

```JS
function MyObject(x) {
  this.x = x;
}

var obj = new MyObject(1);
console.log(obj.x); // 1
```

在JavaScript中，`new`关键字会创建一个新的对象，并将这个新对象绑定为函数调用的`this`值。如果函数返回一个对象，那么这个对象会取代`new`创建的新对象。这是因为new本身的返回值是如果没有新对象就返回自身创建的对象，如果构造函数本身返回对象就返回自身的对象。

### 箭头函数

值得注意的是，es6新增的箭头函数，他没有自己的`this`它会从自己的作用域链上层继承 `this` 值。

使用箭头函数绑定事件时。this不会指向当前的dom对象，而是window对象。



# 





# 优先级

new绑定优先级 > 显示绑定优先级 > 隐式绑定优先级 > 默认绑定优先级



# 

# 

