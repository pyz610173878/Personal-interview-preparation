



```
1. url的解析。一个url一共由一下几个部分组成。协议，域名，具体要访问的资源地址和端口号。
举个最简单的例子。
百度搜索的url。其中就有协议，域名。百度这里因为访问的是根目录所有就没有具体的地址，端口号也会进行省略。



现在常见的协议是，https和ftp。ftp是用来传输文件的。
```





当你在浏览器的地址栏输入一个URL并敲下回车键时，以下是发生的一系列事件：

# 解析URL



1. 浏览器首先会解析你输入的URL。这包括检查URL的协议（如http，https），域名，端口（如果有），路径，查询参数（如果有）等。

2. # URL解析

    

    ```
    http://www.xiaoshuaipeng.com/interview/http/after_url.html#%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90
    http://www.xiaoshuaipeng.com/interview/http/HTTP_HTTPS.html
    ```

    一个基本的url包括几个部分。

    http协议。

    域名

    端口号

    表示要访问的具体资源的路径

    ​	对请求的资源更加细致的描述。

    这个URL包含以下几个部分：

    1. `http://`：这是URL的协议部分，表示使用的是HTTP协议。HTTP是超文本传输协议，用于在网络上传输超文本，如HTML文档。
    2. `www.xiaoshuaipeng.com`：这是URL的主机名部分，表示要访问的网站的域名。
    3. `/interview/http/after_url.html`：这是URL的路径部分，表示要访问的**具体资源的路径**。在这个例子中，它表示要访问的资源位于`interview`目录下的`http`目录下的`after_url.html`文件。
    4. `#%E4%BA%8C%E3%80%81%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90`：这是URL的片段标识符，表示要跳转到页面的哪个部分。在这个例子中，它表示要跳转到页面的“二、详细解析”部分。

    注意，URL中的`%E4%BA%8C%E3%80%81%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90`是“二、详细解析”的**URL编码形式**，它是使用URL编码来表示非ASCII字符的一种方式.另外一种编码形式。

    ## 协议

    常见的网络协议主要包括以下几种：

    1. **HTTP**（HyperText Transfer Protocol）：超文本传输协议，用于在网络上传输超文本，如HTML文档。
    2. **HTTPS**（HyperText Transfer Protocol Secure）：安全的超文本传输协议，它是HTTP的安全版本，用于在网络上传输加密的超文本。
    3. **FTP**（File Transfer Protocol）：文件传输协议，用于在网络上传输文件。
    4. **SMTP**（Simple Mail Transfer Protocol）：简单邮件传输协议，用于电子邮件的传输。
    5. **POP3**（Post Office Protocol 3）：邮局协议版本3，用于接收电子邮件。
    6. **IMAP**（Internet Message Access Protocol）：互联网消息访问协议，用于管理电子邮件。
    7. **Telnet**：远程登录协议，用于远程登录。
    8. **SSH**（Secure Shell）：安全的远程登录协议，用于安全的远程登录。
    9. **DNS**（Domain Name System）：域名系统，用于将域名转换为IP地址。
    10. **TCP**（Transmission Control Protocol）：传输控制协议，提供可靠的、面向连接的字节流服务。
    11. **UDP**（User Datagram Protocol）：用户数据报协议，提供不可靠的、无连接的数据报服务。
    12. **IP**（Internet Protocol）：互联网协议，用于数据包的传输。

    以上这些协议都是互联网通信的基础，它们共同构成了互联网的核心协议栈。

    

    ## 

# 查找缓存

如果浏览器本身有页面的缓存，直接从缓存中加载页面。

1. **查找缓存**：浏览器会首先检查是否有该页面的缓存。如果有，浏览器会直接从缓存中加载页面，这可以大大提高页面加载速度。



# DNS查询

## DNS

DNS（Domain Names System），域名系统，是互联网一项服务，是进行域名和与之相对应的 IP 地址进行转换的服务器。

简单来讲，`DNS`相当于一个翻译官，负责将域名翻译成`ip`地址。域名系统的设计使得人们可以使用易于记忆的名字来访问互联网上的资源，而不是使用复杂的IP地址。

* IP 地址：一长串能够唯一地标记网络上的计算机的数字
* 域名：是由一串用点分隔的名字组成的 Internet 上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识

他是互联网上的一个地址，也是IP地址的别名。类似于我们现实生活中的门牌号。

## 域名

域名是一个具有层次的结构，从上到下一次为根域名、顶级域名、二级域名、三级域名...

<img src="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E8%AF%95%E9%A2%981.assets/image-20231113174050703-16998684529541.png" alt="image-20231113174050703" style="zoom:50%;" />



比如这个域名www.google.com

1. **顶级域名**：这是最右边的一部分，例如.com、.org、.net等。这些域名是最高级别的域名，它们是全球性的，可以在全球范围内使用。
2. **二级域名**：这是第二部分，例如在"[www.google.com"中，"google"就是二级域名。二级域名通常是组织的名称，例如公司、学校或个人。](http://www.google.com"中，"google"就是二级域名。二级域名通常是组织的名称，例如公司、学校或个人。)
3. **三级域名**：这是第三部分，例如在"[www.google.com"中，"www"就是三级域名。三级域名通常是组织内部的特定服务或部门的名称。](http://www.google.com"中，"www"就是三级域名。三级域名通常是组织内部的特定服务或部门的名称。)
4. **子域名**：这是更低级别的域名，例如在"[www.google.com"中，"www"就是子域名。子域名可以是任何有效的域名，只要它在二级或三级域名之下。](http://www.google.com"中，"www"就是子域名。子域名可以是任何有效的域名，只要它在二级或三级域名之下。)

以上就是域名的结构层次。



每个域名对应着一个ip地址。

## dns 查询方式



1. **DNS查询**：如果没有缓存，浏览器会向DNS服务器发送请求，将域名解析为IP地址。



# 建立TCP连接

当确定了ip地址后，就会进行tcp的三次握手，

1. **建立TCP连接**：浏览器会根据IP地址和端口号建立TCP连接。

客户端首先发送一个SYN（同步）包到服务器。它里面包含随机一个生成的序列号。服务器接收到这个包后，会返回一个SYN-ACK包，客户端接收到这个包后，会返回一个ACK包。

我们可以把TCP连接的过程类比为两个人之间的通信。

1. **三次握手（SYN, SYN-ACK, ACK）**：这个过程就像两个人在通信前互相介绍。首先，一个人（客户端）对另一个人（服务器）说：“你好，我叫XXX，我能认识你吗？” 服务器回应：“你好，我叫YYY，我能认识你吗？” 然后，客户端回应：“好的，我们现在可以开始通信了。”
2. **数据传输**：这个过程就像两个人在通信。他们会互相发送消息，并确认收到消息。
3. **四次挥手（FIN, ACK, FIN, ACK）**：这个过程就像两个人在通信结束后互相告别。首先，一个人（客户端）对另一个人（服务器）说：“我们通信结束了，我要离开了。” 服务器回应：“好的，我知道了。” 然后，服务器对客户端说：“我也准备离开了。” 客户端回应：“好的，我知道了。”

这样，两个人就完成了一次通信，并互相告别。





# 发送http请求



1. **发送HTTP请求**：当建立连接之后浏览器会向服务器发送HTTP请求，请求获取指定的页面。

HTTP请求主要由三部分组成：请求行，请求头，请求体。

1. **请求行**：请求行包含了请求方法，请求的URL和HTTP协议版本。例如，`GET /index.html HTTP/1.1`。
2. **请求头**：请求头包含了一些关于请求的元信息，例如`Host`，`User-Agent`，`Accept`，`Accept-Language`，`Accept-Encoding`，`Connection`，`Cookie`等。
3. **请求体**：请求体包含了一些需要发送给服务器的数据，例如POST请求中的表单数据。



# 响应请求

1. **服务器处理请求**：服务器接收到请求后，会处理请求，包括查询数据库，生成动态内容等。

2. **服务器响应**：服务器处理完请求后，会返回一个HTTP响应，包括状态码，响应头，响应体等。

3. **浏览器渲染页面**：浏览器接收到响应后，会解析HTML，CSS，JavaScript等，然后渲染页面。

4. **页面加载完成**：浏览器会显示页面，并触发一些JavaScript事件，如onload事件。

## 



